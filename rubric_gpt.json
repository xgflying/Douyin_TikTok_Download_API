[
  {
    "rubric_id": "R01",
    "rubric_content": "在 bilibili_web.py 中新增 GET /down_video 接口且可被路由访问",
    "必要性": "Essential",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求在 bilibili_web 中新增 down_video 方法且为 GET；可通过检查路由装饰器与路径是否为 /down_video 来验证。"
  },
  {
    "rubric_id": "R02",
    "rubric_content": "接口必须接收 bv_id 必填参数，且类型为字符串",
    "必要性": "Essential",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求 bv_id 为必填作品id参数，需通过 FastAPI Query 或 Path 参数定义验证。"
  },
  {
    "rubric_id": "R03",
    "rubric_content": "接口必须支持 remove_watermark 可选参数，默认值为 0",
    "必要性": "Important",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求 remove_watermark 可选参数，默认值为 0，需通过 FastAPI Query 参数定义验证。"
  },
  {
    "rubric_id": "R04",
    "rubric_content": "接口必须支持 resolution 可选参数，默认值为 0",
    "必要性": "Important",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求 resolution 可选参数，默认值为 0，需通过 FastAPI Query 参数定义验证。"
  },
  {
    "rubric_id": "R05",
    "rubric_content": "视频文件必须保存到项目根目录下的 video 文件夹",
    "必要性": "Essential",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求视频保存到项目根目录下的 video 文件夹，需通过检查文件路径拼接逻辑验证。"
  },
  {
    "rubric_id": "R06",
    "rubric_content": "视频文件名必须为 bv_id.mp4 格式",
    "必要性": "Essential",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求文件名格式为 bv_id.mp4，需通过检查文件名拼接逻辑验证。"
  },
  {
    "rubric_id": "R07",
    "rubric_content": "视频文件已存在时必须直接返回已存在的文件路径",
    "必要性": "Important",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "动态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求文件已存在时直接返回路径，需通过调用接口验证文件存在时的返回结果。"
  },
  {
    "rubric_id": "R08",
    "rubric_content": "当 remove_watermark=1 时必须使用 ffmpeg 移除水印",
    "必要性": "Essential",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求使用 ffmpeg 移除水印，需通过检查代码中是否调用 ffmpeg 命令验证。"
  },
  {
    "rubric_id": "R09",
    "rubric_content": "水印移除需针对右上角包含 bilibili 字样的区域",
    "必要性": "Important",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "动态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确说明水印在右上角且包含 bilibili 字样，需通过检查水印检测与移除区域是否针对右上角验证。"
  },
  {
    "rubric_id": "R10",
    "rubric_content": "接口返回值需参考页面其他接口格式，返回下载成功信息",
    "必要性": "Important",
    "评估维度": "风格（style）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目要求参考其他接口返回格式，需通过检查返回模型是否与其他接口一致验证。"
  },
  {
    "rubric_id": "R11",
    "rubric_content": "关键代码需添加注释说明",
    "必要性": "Optional",
    "评估维度": "风格（style）",
    "验证方式": "静态-人工验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求关键代码添加注释，需通过人工检查代码注释覆盖率验证。"
  },
  {
    "rubric_id": "R12",
    "rubric_content": "必须处理 ffmpeg 未找到的异常情况",
    "必要性": "Important",
    "评估维度": "鲁棒性（robustness）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Implicit",
    "rationale": "实际运行中可能存在 ffmpeg 未安装或路径问题，需通过检查异常处理逻辑验证。"
  },
  {
    "rubric_id": "R13",
    "rubric_content": "必须处理 bv_id 无效或视频不存在的异常情况",
    "必要性": "Important",
    "评估维度": "鲁棒性（robustness）",
    "验证方式": "动态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Implicit",
    "rationale": "调用 Bilibili API 可能返回无效 bv_id 或视频不存在，需通过调用无效 bv_id 验证异常处理。"
  },
  {
    "rubric_id": "R14",
    "rubric_content": "必须支持 resolution 参数选择不同分辨率",
    "必要性": "Important",
    "评估维度": "功能要求（functional requirement）",
    "验证方式": "动态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Explicit",
    "rationale": "题目明确要求支持 resolution 参数选择分辨率，需通过调用不同 resolution 参数验证返回视频分辨率。"
  },
  {
    "rubric_id": "R15",
    "rubric_content": "必须使用异步方式调用 Bilibili API 下载视频",
    "必要性": "Optional",
    "评估维度": "性能（performance）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Implicit",
    "rationale": "FastAPI 应用应使用异步调用提升性能，需通过检查是否使用 async/await 调用 API 验证。"
  },
  {
    "rubric_id": "R16",
    "rubric_content": "必须使用流式下载避免内存占用过高",
    "必要性": "Optional",
    "评估维度": "性能（performance）",
    "验证方式": "静态-模型验证",
    "显性(Explicit)隐性（Implicit）": "Implicit",
    "rationale": "下载大视频应使用流式传输避免内存溢出，需通过检查是否使用 StreamingResponse 或分块下载验证。"
  }
]